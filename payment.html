<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Payment ‚Äì Unlock AI Tax Letter Analysis</title>
</head>

<body style="background:#f8fafc; color:#0f172a; font-family:'Inter',sans-serif; margin:0; padding:0; line-height:1.5;">
    <nav style="background:#1e293b; padding:1rem; box-shadow:0 1px 4px rgba(0,0,0,0.1); display:flex; justify-content:space-between; border-bottom:2px solid #334155; align-items:center;">
        <div style="color:#f5f5f5;"><strong>TaxLetterHelp</strong></div>
        <div>
            <a href="/upload.html" style="color:#f5f5f5; text-decoration:none; margin:0 10px; padding:8px 12px; border-radius:4px; transition:background-color 0.2s, color 0.2s;">Upload</a> |
            <a href="/dashboard.html" style="color:#f5f5f5; text-decoration:none; margin:0 10px; padding:8px 12px; border-radius:4px; transition:background-color 0.2s, color 0.2s;">Dashboard</a> |
            <a href="/pricing.html" style="color:#f5f5f5; text-decoration:none; margin:0 10px; padding:8px 12px; border-radius:4px; transition:background-color 0.2s, color 0.2s;">Pricing</a> |
            <a href="/login.html" style="color:#f5f5f5; text-decoration:none; margin:0 10px; padding:8px 12px; border-radius:4px; transition:background-color 0.2s, color 0.2s;">Login</a>
        </div>
    </nav>

    <main>
        <div style="width:min(1120px, 92%); margin-inline:auto; padding:2rem 0;">
            <div style="text-align:center; padding:3rem 0; background:linear-gradient(135deg, #1e293b 0%, #334155 100%); color:white; margin-bottom:3rem; border-radius:12px;">
                <h1 style="font-size:2.5rem; margin-bottom:1rem; font-weight:700;">üîí Secure Payment Required</h1>
                <p style="font-size:1.2rem; opacity:0.9; max-width:600px; margin:0 auto;">Unlock AI-powered tax letter analysis and get your professional response letter in minutes</p>
            </div>

            <div style="max-width:600px; margin:0 auto; background:white; border-radius:16px; padding:2.5rem; box-shadow:0 20px 40px rgba(0,0,0,0.1); border:1px solid #e2e8f0;">
                <div style="text-align:center; margin-bottom:2rem; color:#2d3748;">
                    <h2 style="font-size:1.8rem; margin-bottom:1rem; color:#1e293b;">AI Tax Letter Analysis Package</h2>
                    <p style="color:#4a5568; line-height:1.6;">Get instant, professional analysis of your IRS letter with a ready-to-mail response letter. Save hundreds compared to hiring a CPA.</p>
                </div>

                <div style="background:linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border:2px solid #3b82f6; border-radius:12px; padding:2rem; margin:2rem 0; text-align:center;">
                    <h3 style="font-size:1.5rem; margin-bottom:0.5rem; color:#1e293b;">One-Time Payment</h3>
                    <div style="font-size:3rem; font-weight:800; color:#1e40af; margin:0.5rem 0;">$49 <span style="font-size:1rem; color:#64748b; font-weight:500;">single use</span></div>
                    
                    <ul style="list-style:none; padding:0; margin:1.5rem 0; text-align:left;">
                        <li style="padding:0.75rem 0; color:#2d3748; font-weight:500; display:flex; align-items:center;">‚úì Professional IRS response letter</li>
                        <li style="padding:0.75rem 0; color:#2d3748; font-weight:500; display:flex; align-items:center;">‚úì AI-powered analysis & plain-English explanation</li>
                        <li style="padding:0.75rem 0; color:#2d3748; font-weight:500; display:flex; align-items:center;">‚úì PDF & DOCX downloads</li>
                        <li style="padding:0.75rem 0; color:#2d3748; font-weight:500; display:flex; align-items:center;">‚úì Covers CP2000, 1099-K, and common IRS notices</li>
                        <li style="padding:0.75rem 0; color:#2d3748; font-weight:500; display:flex; align-items:center;">‚úì Delivered securely within minutes</li>
                        <li style="padding:0.75rem 0; color:#2d3748; font-weight:500; display:flex; align-items:center;">‚úì No subscriptions or hidden fees</li>
                    </ul>
                </div>

                <button id="payButton" style="display:block; width:100%; background:linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color:white; padding:1.2rem 2rem; border:none; border-radius:12px; font-size:1.1rem; font-weight:700; cursor:pointer; transition:all 0.3s ease; box-shadow:0 6px 20px rgba(59, 130, 246, 0.3); text-decoration:none; text-align:center;">
                    Pay & Unlock My AI Letter Analysis
                </button>

                <div id="loading" style="display:none; text-align:center; margin-top:1rem;">
                    <div style="border:3px solid #f3f3f3; border-top:3px solid #3b82f6; border-radius:50%; width:30px; height:30px; animation:spin 1s linear infinite; margin:0 auto;"></div>
                    <p style="color:#2d3748;">Redirecting to secure payment...</p>
                </div>

                <div style="display:flex; justify-content:center; gap:2rem; margin-top:2rem; padding-top:2rem; border-top:1px solid #e2e8f0;">
                    <div style="display:flex; align-items:center; gap:0.5rem; color:#64748b; font-size:0.9rem;">
                        <span>üîí</span>
                        <span>SSL Encrypted</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:0.5rem; color:#64748b; font-size:0.9rem;">
                        <span>üí≥</span>
                        <span>Stripe Secure</span>
                    </div>
                    <div style="display:flex; align-items:center; gap:0.5rem; color:#64748b; font-size:0.9rem;">
                        <span>üõ°Ô∏è</span>
                        <span>PCI Compliant</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer style="padding:28px 0; background:#0b1220; color:#cbd5e1; text-align:center; margin-top:3rem;">
        <div style="width:min(1120px, 92%); margin-inline:auto;">
            <p>&copy; 2025 TaxLetterHelp. <a href="/privacy.html" style="color:#93c5fd; text-decoration:none;">Privacy Policy</a> | <a href="/terms.html" style="color:#93c5fd; text-decoration:none;">Terms</a> | <a href="/disclaimer.html" style="color:#93c5fd; text-decoration:none;">Disclaimer</a></p>
        </div>
    </footer>

    <script>
        document.getElementById('payButton').addEventListener('click', async function() {
            const button = this;
            const loading = document.getElementById('loading');
            
            // Show loading state
            button.disabled = true;
            button.textContent = 'Processing...';
            loading.style.display = 'block';
            
            try {
                // Call Netlify function to create checkout session
                const response = await fetch('/.netlify/functions/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({})
                });
                
                const data = await response.json();
                
                if (data.url) {
                    // Redirect to Stripe Checkout
                    window.location.href = data.url;
                } else {
                    throw new Error(data.error || 'Failed to create checkout session');
                }
            } catch (error) {
                console.error('Payment error:', error);
                alert('Payment setup failed. Please try again or contact support.');
                
                // Reset button state
                button.disabled = false;
                button.textContent = 'Pay & Unlock My AI Letter Analysis';
                loading.style.display = 'none';
            }
        });
    </script>
</body>
</html>
